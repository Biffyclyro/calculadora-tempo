{"ast":null,"code":"import * as i0 from \"@angular/core\";\nexport let CalculadoraComponent = /*#__PURE__*/(() => {\n  class CalculadoraComponent {\n    constructor() {\n      this.resposta = '';\n      this.isResultado = false;\n      this.primeirasUnidades = [];\n      this.segundasUnidades = [];\n    }\n    ngOnInit() {}\n    onKey(event) {\n      switch (event.key) {\n        case 'Enter':\n          {\n            this.calcular();\n            break;\n          }\n        case 'Backspace':\n          {\n            this.limpar();\n            break;\n          }\n        case '+':\n        case '-':\n        case '/':\n        case '*':\n          {\n            this.insereOperador(event.key, true);\n            break;\n          }\n        case 'h':\n        case 'm':\n        case 's':\n          {\n            this.insereUnidade(event.key);\n            break;\n          }\n        default:\n          {\n            const keyPressed = Number(event.key);\n            if (keyPressed.toString() !== 'NaN') {\n              this.insereNumero(keyPressed);\n            }\n            break;\n          }\n      }\n      // console.log(event.key);\n    }\n\n    insereNumero(valor) {\n      if (this.isResultado) {\n        this.limpar();\n        this.isResultado = false;\n      }\n      this.resposta += String(valor);\n    }\n    insereUnidade(unidade) {\n      if (this.resposta !== '' && !this.endsWithAny(this.resposta, '+', '-', '*', '/', 'h', 'm', 's') && this.operador !== '*' && this.operador !== '/') {\n        this.addUnidades(unidade, !this.operador ? this.primeirasUnidades : this.segundasUnidades);\n      }\n    }\n    insereOperador(operador, keyBoard = false) {\n      if (this.endsWithAny(this.resposta, 'h', 'm', 's')) {\n        if (this.isResultado) {\n          this.isResultado = false;\n        }\n        if (this.operador) {\n          this.calcular();\n        }\n        if (this.resposta !== '') {\n          this.operador = operador;\n        }\n        this.resposta += operador;\n      }\n    }\n    limpar() {\n      this.operador = undefined;\n      this.resposta = '';\n      this.primeirasUnidades = [];\n      this.segundasUnidades = [];\n    }\n    calcular() {\n      let offset = 0;\n      const sinal = this.resposta[0] === '-';\n      const operandos = this.resposta.split(/[-+/*]/);\n      // const calculo: number[] = this.resposta.split(/[-+/*]/).map(Number);\n      const calculoTempo = [];\n      let timeResposta = this.timeZeroBuilder();\n      if (sinal) {\n        // calculo[1] -= calculo[1] * 2;\n        offset++;\n      }\n      for (let i = 0; i <= 1; i++) {\n        const numeros = operandos[i + offset].split(/[hms]/).map(Number);\n        calculoTempo.push(this.buildOperandos(i === 0 ? this.primeirasUnidades : this.segundasUnidades, numeros));\n      }\n      /* if (sinal) {\n         calculoTempo[0].setDate(calculoTempo[0].getDate() - calculoTempo[0].getDate() * 2);\n       }*/\n      switch (this.operador) {\n        case '+':\n          {\n            const secondsA = this.parseForSeconds(calculoTempo[0]);\n            const secondsB = this.parseForSeconds(calculoTempo[1]);\n            timeResposta = this.parseForTime(secondsA + secondsB);\n            this.operador = undefined;\n            break;\n          }\n        case '-':\n          {\n            const secondsA = this.parseForSeconds(calculoTempo[0]);\n            const secondsB = this.parseForSeconds(calculoTempo[1]);\n            timeResposta = this.parseForTime(secondsA - secondsB);\n            this.operador = undefined;\n            break;\n          }\n        case '*':\n          {\n            const x = Number(operandos[offset + 1]);\n            let seconds = this.parseForSeconds(calculoTempo[0]);\n            seconds *= x;\n            timeResposta = this.parseForTime(seconds);\n            this.operador = undefined;\n            break;\n          }\n        case '/':\n          {\n            const x = Number(operandos[offset + 1]);\n            let seconds = this.parseForSeconds(calculoTempo[0]);\n            seconds /= x;\n            timeResposta = this.parseForTime(seconds);\n            this.operador = undefined;\n            break;\n          }\n      }\n      this.isResultado = true;\n      this.resposta = this.buldResposta(timeResposta);\n      this.primeirasUnidades = ['h', 'm', 's'];\n      this.segundasUnidades = [];\n    }\n    endsWithAny(str, ...operadores) {\n      return operadores.some(op => str.endsWith(op));\n    }\n    addUnidades(unidade, listaUnidades) {\n      if (unidade === 'h' && listaUnidades.length === 0) {\n        listaUnidades.push(unidade);\n        this.resposta += unidade;\n      } else if (unidade === 'm' && !listaUnidades.includes('s') && !listaUnidades.includes('m')) {\n        listaUnidades.push(unidade);\n        this.resposta += unidade;\n      } else if (unidade === 's' && !listaUnidades.includes('s')) {\n        listaUnidades.push(unidade);\n        this.resposta += unidade;\n      }\n    }\n    buildOperandos(unidades, numeros) {\n      const tempo = this.timeZeroBuilder();\n      if (unidades.length === 3) {\n        tempo.h = numeros[0];\n        tempo.m = numeros[1];\n        tempo.s = numeros[2];\n      } else {\n        if (unidades.includes('h')) {\n          tempo.h = numeros[unidades.indexOf('h')];\n        }\n        if (unidades.includes('s')) {\n          tempo.s = numeros[unidades.indexOf('s')];\n        }\n        if (unidades.includes('m')) {\n          tempo.m = numeros[unidades.indexOf('m')];\n        }\n      }\n      return tempo;\n    }\n    buldResposta(timeResposta) {\n      return `${timeResposta.h}h${timeResposta.m}m${timeResposta.s}s`;\n    }\n    timeZeroBuilder() {\n      return {\n        h: 0,\n        m: 0,\n        s: 0\n      };\n    }\n    parseForSeconds(t) {\n      let segundos = t.s;\n      segundos += t.m * 60;\n      segundos += t.h * 3600;\n      return segundos;\n    }\n    parseForTime(n) {\n      const h = Math.floor(n / 3600);\n      n %= 3600;\n      const m = Math.floor(n / 60);\n      const s = n % 60;\n      return {\n        h,\n        m,\n        s\n      };\n    }\n    static #_ = this.ɵfac = function CalculadoraComponent_Factory(t) {\n      return new (t || CalculadoraComponent)();\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CalculadoraComponent,\n      selectors: [[\"app-calculadora\"]],\n      decls: 55,\n      vars: 1,\n      consts: [[1, \"container-fluid\", \"col-8\", \"text-center\", \"p-0\", \"mt-5\"], [1, \"offset-md-4\"], [1, \"m-4\"], [1, \"row\"], [\"type\", \"text\", \"id\", \"display\", \"name\", \"display\", \"readonly\", \"\", 1, \"form-control\", \"text-right\", \"col-10\", 3, \"value\", \"keydown\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btn7\", 1, \"btn\", \"btn-dark\", \"kz-btn\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btn8\", 1, \"btn\", \"btn-dark\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btn9\", 1, \"btn\", \"btn-dark\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btSegundo\", 1, \"btn\", \"btn-success\", \"col-2\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-dark\", \"col-4\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btn4\", 1, \"btn\", \"btn-dark\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btn5\", 1, \"btn\", \"btn-dark\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btn6\", 1, \"btn\", \"btn-dark\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btnMin\", 1, \"btn\", \"btn-success\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btnDivisao\", 1, \"btn\", \"btn-warning\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btnMult\", 1, \"btn\", \"btn-warning\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btn1\", 1, \"btn\", \"btn-dark\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btn2\", 1, \"btn\", \"btn-dark\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btn3\", 1, \"btn\", \"btn-dark\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btnHora\", 1, \"btn\", \"btn-success\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btnSub\", 1, \"btn\", \"btn-warning\", \"col-2\", 3, \"click\"], [\"type\", \"button\", \"id\", \"btnSoma\", 1, \"btn\", \"btn-warning\", \"col-2\", 3, \"click\"], [1, \"col-2\"], [\"type\", \"button\", \"id\", \"btn0\", 1, \"btn\", \"btn-dark\", \"col-2\", 3, \"click\"], [1, \"col-8\"]],\n      template: function CalculadoraComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n          i0.ɵɵtext(2, \"Calculadora de tempo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 1)(4, \"table\", 2)(5, \"tr\", 3)(6, \"input\", 4);\n          i0.ɵɵlistener(\"keydown\", function CalculadoraComponent_Template_input_keydown_6_listener($event) {\n            return ctx.onKey($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\", 5);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_7_listener() {\n            return ctx.limpar();\n          });\n          i0.ɵɵtext(8, \" C \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"tr\", 3)(10, \"div\", 6);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_10_listener() {\n            return ctx.insereNumero(7);\n          });\n          i0.ɵɵtext(11, \" 7 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 7);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_12_listener() {\n            return ctx.insereNumero(8);\n          });\n          i0.ɵɵtext(13, \" 8 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 8);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_14_listener() {\n            return ctx.insereNumero(9);\n          });\n          i0.ɵɵtext(15, \" 9 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"div\", 9);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_16_listener() {\n            return ctx.insereUnidade(\"s\");\n          });\n          i0.ɵɵtext(17, \" s \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\", 10);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_18_listener() {\n            return ctx.calcular();\n          });\n          i0.ɵɵtext(19, \" = \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"tr\", 3)(21, \"div\", 11);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_21_listener() {\n            return ctx.insereNumero(4);\n          });\n          i0.ɵɵtext(22, \" 4 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 12);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_23_listener() {\n            return ctx.insereNumero(5);\n          });\n          i0.ɵɵtext(24, \" 5 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"div\", 13);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_25_listener() {\n            return ctx.insereNumero(6);\n          });\n          i0.ɵɵtext(26, \" 6 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"div\", 14);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_27_listener() {\n            return ctx.insereUnidade(\"m\");\n          });\n          i0.ɵɵtext(28, \" m \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"div\", 15);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_29_listener() {\n            return ctx.insereOperador(\"/\");\n          });\n          i0.ɵɵtext(30, \" / \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"div\", 16);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_31_listener() {\n            return ctx.insereOperador(\"*\");\n          });\n          i0.ɵɵtext(32, \" * \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(33, \"tr\", 3)(34, \"div\", 17);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_34_listener() {\n            return ctx.insereNumero(1);\n          });\n          i0.ɵɵtext(35, \" 1 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"div\", 18);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_36_listener() {\n            return ctx.insereNumero(2);\n          });\n          i0.ɵɵtext(37, \" 2 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"div\", 19);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_38_listener() {\n            return ctx.insereNumero(3);\n          });\n          i0.ɵɵtext(39, \" 3 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(40, \"div\", 20);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_40_listener() {\n            return ctx.insereUnidade(\"h\");\n          });\n          i0.ɵɵtext(41, \" h \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"div\", 21);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_42_listener() {\n            return ctx.insereOperador(\"-\");\n          });\n          i0.ɵɵtext(43, \" - \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(44, \"div\", 22);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_44_listener() {\n            return ctx.insereOperador(\"+\");\n          });\n          i0.ɵɵtext(45, \" + \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(46, \"tr\", 3);\n          i0.ɵɵelement(47, \"div\", 23);\n          i0.ɵɵelementStart(48, \"div\", 24);\n          i0.ɵɵlistener(\"click\", function CalculadoraComponent_Template_div_click_48_listener() {\n            return ctx.insereNumero(0);\n          });\n          i0.ɵɵtext(49, \" 0 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(50, \"div\", 25);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(51, \"p\");\n          i0.ɵɵtext(52, \"Insira o tempo seguido da unidade!\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(53, \"p\");\n          i0.ɵɵtext(54, \"Multiplica\\u00E7\\u00F5es e divis\\u00F5es n\\u00E3o precisam de unidades!\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"value\", ctx.resposta);\n        }\n      }\n    });\n  }\n  return CalculadoraComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}